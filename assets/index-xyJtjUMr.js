(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))m(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function m(e){if(e.ep)return;e.ep=!0;const t=a(e);fetch(e.href,t)}})();const E="https://resurssivaraus.espoo.fi/liikunnantilavaraus/haku/?ResourceIDs=",R=[{swimmingHallName:"MatinkylÃ¤n uimahalli",swimmingAssets:[{swimmingAssetName:"Terapia-allas",url:"24790"},{swimmingAssetName:"Kuntosali",url:"24847"},{swimmingAssetName:"50m, koko allas",url:"24767",tracks:[{trackName:"Rata 1",url:"24768"},{trackName:"Rata 2",url:"24769"},{trackName:"Rata 3",url:"24770"},{trackName:"Rata 4",url:"24771"},{trackName:"Rata 5",url:"24772"},{trackName:"Rata 6",url:"24773"},{trackName:"Rata 7",url:"24774"},{trackName:"Rata 8",url:"24775"}]}]},{swimmingHallName:"LeppÃ¤vaaran uimahalli",swimmingAssets:[{swimmingAssetName:"Terapia-allas",url:"18509"},{swimmingAssetName:"Kuntosali",url:"16083"},{swimmingAssetName:"Maauimala, koko allas",url:"19191"},{swimmingAssetName:"Iso allas, koko allas",url:"16074"}]},{swimmingHallName:"Espoonlahden uimahalli",swimmingAssets:[{swimmingAssetName:"Kuntosali 1 (ylÃ¤sali)",url:"16765"},{swimmingAssetName:"Vapaaharjoittelukuntosali",url:"15958"},{swimmingAssetName:"50 m, koko allas",url:"15939"}]},{swimmingHallName:"Keski-Espoon uimahalli",swimmingAssets:[{swimmingAssetName:"Terapia-allas",url:"16650"},{swimmingAssetName:"Kuntosali",url:"16654"},{swimmingAssetName:"Iso allas, koko allas",url:"16645"}]},{swimmingHallName:"Olari uimahalli",swimmingAssets:[{swimmingAssetName:"Koko allas",url:"15968"},{swimmingAssetName:"Kuntosali",url:"15967"}]}];document.querySelector("#app").innerHTML=`
 <h1 class="text-2xl text-center m-2 p-2 bg-blue-500 text-white rounded">Swimming hall schedules</h1>
    <div id="app" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
      <!-- Swimming halls will be inserted here -->
    </div>
`;const C=document.getElementById("app"),v=Math.floor(Date.now()/1e3-4*60*60),D=Math.floor(Date.now()/1e3+4*60*60),I=r=>{const s="https://users.metropolia.fi/~aleksino/proxytest.php?url="+encodeURIComponent(r);return fetch(s).then(a=>a.json()).catch(a=>console.error("Error:",a))};R.forEach(r=>{const s=document.createElement("div");s.className="border p-4 rounded shadow bg-white";const a=document.createElement("h2");a.className="text-xl font-bold mb-2 text-blue-500",a.textContent=r.swimmingHallName,s.appendChild(a);const m=document.createElement("ul");r.swimmingAssets.forEach(e=>{const t=`https://resurssivaraus.espoo.fi/Tailored/prime_product_intranet/espoo/web/Calendar/ReservationData.aspx?resourceid%5B%5D=${e.url}&start=${v}&end=${D}&_=${v}`;I(t).then(k=>{const o=new Date,y=new Date(o.getTime()+60*60*1e3),A=new Date(o.getTime()+2*60*60*1e3),H=new Date(o.getTime()+3*60*60*1e3);let d=!1,h=!1,p=!1,i=!1;k.forEach(N=>{const b=new Date(N.start),x=new Date(N.end);b<=y&&x>o&&(d=!0,console.log("ðŸš€ ~ fetchData ~ hasReservationInNext1Hour:",d)),b<=A&&x>o&&(h=!0,console.log("ðŸš€ ~ fetchData ~ hasReservationInNext2Hours:",h)),b<=H&&x>o&&(p=!0,console.log("ðŸš€ ~ fetchData ~ hasReservationInNext3Hours:",p)),N.title.includes("Vapaaharjoitte")&&(i=!0,console.log("ðŸš€ ~ fetchData ~ hasFreeReservation:",i))}),i?n.className="inline-block bg-green-500 m-4 hover:bg-green-700 text-white font-bold py-2 px-4 rounded":d?n.className="inline-block bg-red-500 m-4 hover:bg-red-700 text-white font-bold py-2 px-4 rounded":n.className="inline-block bg-green-500 m-4 hover:bg-green-700 text-white font-bold py-2 px-4 rounded";const c=document.createElement("div");c.className="flex flex-row";const g=document.createElement("span");g.className="inline-block h-4 w-4 bg-red-800 rounded-full m-1",g.style.visibility=d&&!i?"visible":"hidden";const f=document.createElement("span");f.className="inline-block h-4 w-4 bg-red-800 rounded-full m-1",f.style.visibility=h&&!i?"visible":"hidden";const w=document.createElement("span");w.className="inline-block h-4 w-4 bg-red-800 rounded-full m-1",w.style.visibility=p&&!i?"visible":"hidden",c.appendChild(g),c.appendChild(f),c.appendChild(w),n.appendChild(c)});const l=document.createElement("li");l.className="flex space-x-4";const u=document.createElement("a"),n=document.createElement("a");n.href=t,n.textContent="R",u.href=E+e.url,u.textContent=e.swimmingAssetName,u.className="inline-block bg-blue-500 m-4 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",n.className="inline-block bg-blue-500 m-4 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",l.appendChild(u),l.appendChild(n),m.appendChild(l)}),s.appendChild(m),C.appendChild(s)});
